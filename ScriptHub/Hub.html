<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Orca Hub</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#141414; color:white; overflow-x:hidden; }

::-webkit-scrollbar { width:14px; }
::-webkit-scrollbar-track { background:#1e1e1e; }
::-webkit-scrollbar-thumb { background:#424242; border:2px solid #1e1e1e; background-clip: content-box; }
::-webkit-scrollbar-thumb:hover { background:#4f4f4f; }
::-webkit-scrollbar-thumb:active { background:#5a5a5a; }

.container { padding:20px; max-width:100%; }
.header h1 { font-size:24px; font-weight:bold; color:white; margin-bottom:8px; }
.header p { color:#AAAAAA; font-size:14px; margin-bottom:24px; }

.loading { display:flex; justify-content:center; align-items:center; padding:40px; }
.spinner { width:40px; height:40px; border:4px solid #333; border-top:4px solid #007ACC; border-radius:50%; animation:spin 1s linear infinite; }
@keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

.scripts-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:16px; margin-bottom:24px; }
.script-card { background:#282828; border-radius:4px; overflow:hidden; cursor:pointer; transition:all 0.15s ease; height:auto; display:flex; flex-direction:column; box-shadow:0 2px 8px rgba(0,0,0,0.3); }
.script-card:hover { background:#373739; transform:scale(1.02); box-shadow:0 4px 16px rgba(0,0,0,0.4); }

.card-header { height:120px; position:relative; background:linear-gradient(135deg,#3C3C41,#28282D); overflow:hidden; }
.game-image { width:100%; height:100%; object-fit:cover; opacity:0.8; transition:opacity 0.3s ease; }
.placeholder { position:absolute; top:0; left:0; width:100%; height:100%; display:flex; align-items:center; justify-content:center; background:#46464B; }
.placeholder-image { width:96px; height:96px; opacity:0.6; }

.card-tags { position:absolute; top:8px; right:8px; display:flex; gap:4px; }
.tag { padding:2px 6px; border-radius:8px; font-size:10px; font-weight:bold; color:white; }
.tag.trusted { background:#43A047; }
.tag.universal { background:#2196F3; }

.card-content { padding:8px 12px; display:flex; flex-direction:column; }
.script-title { font-size:14px; font-weight:600; color:white; margin-bottom:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.script-description { font-size:12px; color:#CCCCCC; line-height:1.3; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; }

.no-results { text-align:center; padding:60px 20px; color:#888; display:none; }
.no-results .icon { margin-bottom:16px; opacity:0.5; }
.no-results .icon img { width:48px; height:48px; filter:grayscale(1) opacity(0.5); }
.no-results h3 { font-size:18px; font-weight:bold; margin-bottom:8px; color:white; }
.no-results p { font-size:14px; color:#AAA; }

@media(max-width:768px){ .scripts-grid { grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:12px; } }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>
            <img src="https://orca-executor.vercel.app/Orca.png" alt="Orca" style="width:24px;height:24px;vertical-align:middle;margin-right:6px;">
            Orca Hub
        </h1>
        <p>Premium curated scripts collection</p>
    </div>

    <div class="loading" id="loadingIndicator">
        <div class="spinner"></div>
    </div>

    <div class="scripts-grid" id="scriptsGrid"></div>

    <div class="no-results" id="noResults">
        <div class="icon">
            <img src="https://orca-executor.vercel.app/ScriptHub/Images/bug.png" alt="No scripts">
        </div>
        <h3>No scripts available</h3>
        <p>The Orca Hub is currently empty</p>
    </div>
</div>

<script src="https://orca-executor.vercel.app/OrcaHub/ScriptHub.json"></script>

<script>
function renderHub() {
    const loading = document.getElementById('loadingIndicator');
    const grid = document.getElementById('scriptsGrid');
    const noResults = document.getElementById('noResults');
    loading.style.display='none';

    if(!window.OrcaHubData || !window.OrcaHubData.length){
        noResults.style.display='block';
        return;
    }

    grid.innerHTML='';
    window.OrcaHubData.forEach(script=>{
        const card=document.createElement('div');
        card.className='script-card';
        card.onclick=()=>loadScript(script);

        card.innerHTML=`
            <div class="card-header">
                <div class="placeholder">
                    <img class="placeholder-image" src="https://orca-executor.vercel.app/ScriptHub/Images/file-image.png" alt="No image">
                </div>
                ${script.raw_image?`<img class="game-image" src="${script.raw_image}" alt="${script.name}" onerror="this.style.display='none'">`:''}
                <div class="card-tags">
                    ${script.trusted?'<div class="tag trusted">TRUSTED</div>':''}
                    ${script.universal?'<div class="tag universal">UNIVERSAL</div>':''}
                </div>
            </div>
            <div class="card-content">
                <div class="script-title">${escapeHtml(script.name||'Untitled Script')}</div>
                <div class="script-description">${escapeHtml(script.description||'No description')}</div>
            </div>
        `;
        grid.appendChild(card);
    });
}

function loadScript(script){
    if(window.chrome && window.chrome.webview){
        window.chrome.webview.postMessage({
            action:'loadOrcaScript',
            title:script.name||'Untitled Script',
            script:script.script||'',
            source:'orca'
        });
    }
}

function escapeHtml(text){
    const div=document.createElement('div');
    div.textContent=text;
    return div.innerHTML;
}

document.addEventListener('DOMContentLoaded', renderHub);
</script>
</body>
</html>
